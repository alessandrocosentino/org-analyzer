package com.bigcompany;
import com.bigcompany.io.*; import com.bigcompany.model.Employee; import com.bigcompany.service.*; import com.bigcompany.service.OrganizationFactory.Organization; import com.bigcompany.service.rules.*; import java.nio.file.*; import java.util.*; public final class OrgAnalyzer{
  public static void main(String[] args){ if(args.length!=1){ System.err.println("Usage: java -jar target/org-analyzer-1.0.0.jar <employees.csv>"); System.exit(2);} Path csv=Path.of(args[0]); if(!Files.isRegularFile(csv)){ System.err.println("File not found: "+csv); System.exit(2);} try{ EmployeeReader reader=new EmployeeCsvReader(); List<Employee> employees=reader.read(csv); Organization org=OrganizationFactory.build(employees); var policy=new DefaultSalaryPolicy(); var rules=List.of(new UnderpaidManagerRule(policy), new OverpaidManagerRule(policy), new ReportingLineTooLongRule(4)); var engine=new RuleEngine(rules); var result=engine.run(org); new ConsolePrinter().print(result);} catch(Exception e){ System.err.println("ERROR: "+e.getMessage()); e.printStackTrace(System.err); System.exit(1);} }
}