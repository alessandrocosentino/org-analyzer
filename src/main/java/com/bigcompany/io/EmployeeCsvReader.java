package com.bigcompany.io;
import com.bigcompany.model.Employee; import java.io.*; import java.nio.file.*; import java.util.*; public final class EmployeeCsvReader implements EmployeeReader{
  public List<Employee> read(Path csv) throws IOException{ List<Employee> list=new ArrayList<>(); try(BufferedReader br=Files.newBufferedReader(csv)){ String header=br.readLine(); if(header==null) throw new IOException("Empty CSV"); String line; while((line=br.readLine())!=null){ if(line.isBlank()) continue; String[] p=line.split(",",-1); if(p.length<5) throw new IOException("Malformed line: "+line); int id=Integer.parseInt(p[0].trim()); String f=p[1].trim(); String l=p[2].trim(); double s=Double.parseDouble(p[3].trim()); Integer m=p[4].trim().isEmpty()?null:Integer.valueOf(p[4].trim()); list.add(new Employee(id,f,l,s,m)); } } return list; } }